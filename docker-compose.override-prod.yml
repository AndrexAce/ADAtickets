name: ADAtickets

services:
  adatickets.apiservice:
    build:
      context: .
      args:
       - BUILD_CONFIGURATION=Release
      dockerfile: ADAtickets.ApiService/Dockerfile
      tags:
        - andrexace/adatickets-api:${API_TAG:-latest}
    image: andrexace/adatickets-api:${API_TAG:-latest}
    environment:
      - DOTNET_GENERATE_ASPNET_CERTIFICATE=false
      - ASPNETCORE_ENVIRONMENT=Production
      - ASPNETCORE_URLS=https://+:8081;http://+:8080;
      - ASPNETCORE_Kestrel__Certificates__Default__Password=${CERT_PASSWORD:?error}
      - ASPNETCORE_Kestrel__Certificates__Default__Path=${CERT_PATH:?error}
    volumes:
      - ${VOLUME_PATH:?error}:/https:ro